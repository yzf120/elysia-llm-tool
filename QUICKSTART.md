[//]: # (# Elysia LLM Tool - å¿«é€Ÿå¼€å§‹æŒ‡å—)

[//]: # ()
[//]: # (## ğŸ“‹ å‰ç½®è¦æ±‚)

[//]: # ()
[//]: # (1. Go 1.21 æˆ–æ›´é«˜ç‰ˆæœ¬)

[//]: # (2. å·²å®‰è£… trpc å·¥å…·é“¾)

[//]: # (3. è±†åŒ… API Keyï¼ˆä»ç«å±±å¼•æ“è·å–ï¼‰)

[//]: # ()
[//]: # (## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆ5åˆ†é’Ÿä¸Šæ‰‹ï¼‰)

[//]: # ()
[//]: # (### ç¬¬ä¸€æ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡)

[//]: # ()
[//]: # (```bash)

[//]: # (# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿)

[//]: # (cp .env.example .env)

[//]: # ()
[//]: # (# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API Key)

[//]: # (# DOUBAO_API_KEY=ä½ çš„è±†åŒ…APIå¯†é’¥)

[//]: # (```)

[//]: # ()
[//]: # (### ç¬¬äºŒæ­¥ï¼šç”Ÿæˆ Proto ä»£ç )

[//]: # ()
[//]: # (```bash)

[//]: # (cd proto)

[//]: # (make)

[//]: # (cd ..)

[//]: # (```)

[//]: # ()
[//]: # (### ç¬¬ä¸‰æ­¥ï¼šå¯åŠ¨æœåŠ¡)

[//]: # ()
[//]: # (```bash)

[//]: # (# æ–¹å¼1: ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰)

[//]: # (./start.sh)

[//]: # ()
[//]: # (# æ–¹å¼2: ä½¿ç”¨ Makefile)

[//]: # (make run)

[//]: # ()
[//]: # (# æ–¹å¼3: ç›´æ¥è¿è¡Œ)

[//]: # (go run main.go)

[//]: # (```)

[//]: # ()
[//]: # (æœåŠ¡å°†åœ¨ `127.0.0.1:9001` å¯åŠ¨ã€‚)

[//]: # ()
[//]: # (## ğŸ§ª æµ‹è¯•æœåŠ¡)

[//]: # ()
[//]: # (### æµ‹è¯•è±†åŒ… SDKï¼ˆç‹¬ç«‹æµ‹è¯•ï¼‰)

[//]: # ()
[//]: # (```bash)

[//]: # (# è®¾ç½®ç¯å¢ƒå˜é‡)

[//]: # (export DOUBAO_API_KEY=ä½ çš„APIå¯†é’¥)

[//]: # ()
[//]: # (# è¿è¡Œæµ‹è¯•)

[//]: # (cd example)

[//]: # (go run doubao_sdk_test.go)

[//]: # (```)

[//]: # ()
[//]: # (### æµ‹è¯• RPC æœåŠ¡)

[//]: # ()
[//]: # (é¦–å…ˆç¡®ä¿æœåŠ¡å·²å¯åŠ¨ï¼Œç„¶ååœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œï¼š)

[//]: # ()
[//]: # (```bash)

[//]: # (cd example)

[//]: # (go run client_example.go)

[//]: # (```)

[//]: # ()
[//]: # (## ğŸ“ é¡¹ç›®ç»“æ„è¯´æ˜)

[//]: # ()
[//]: # (```)

[//]: # (elysia-llm-tool/)

[//]: # (â”œâ”€â”€ client/              # å„å¤§æ¨¡å‹å®¢æˆ·ç«¯ç®¡ç†)

[//]: # (â”‚   â”œâ”€â”€ doubao_client.go    # è±†åŒ…å®¢æˆ·ç«¯ï¼ˆå·²å®ç°ï¼‰)

[//]: # (â”‚   â”œâ”€â”€ hunyuan_client.go   # æ··å…ƒå®¢æˆ·ç«¯ï¼ˆå¾…å®ç°ï¼‰)

[//]: # (â”‚   â””â”€â”€ deepseek_client.go  # DeepSeekå®¢æˆ·ç«¯ï¼ˆå¾…å®ç°ï¼‰)

[//]: # (â”œâ”€â”€ config/              # é…ç½®ç®¡ç†)

[//]: # (â”‚   â””â”€â”€ config.go           # ç»Ÿä¸€é…ç½®ç®¡ç†)

[//]: # (â”œâ”€â”€ proto/               # Proto å®šä¹‰)

[//]: # (â”‚   â”œâ”€â”€ llm/)

[//]: # (â”‚   â”‚   â”œâ”€â”€ llm.proto       # æœåŠ¡å®šä¹‰)

[//]: # (â”‚   â”‚   â”œâ”€â”€ llm.pb.go       # ç”Ÿæˆçš„ä»£ç )

[//]: # (â”‚   â”‚   â””â”€â”€ llm.trpc.go     # ç”Ÿæˆçš„ä»£ç )

[//]: # (â”‚   â””â”€â”€ Makefile            # Proto ç¼–è¯‘è„šæœ¬)

[//]: # (â”œâ”€â”€ service/             # æœåŠ¡å®ç°)

[//]: # (â”‚   â””â”€â”€ llm_service_impl.go # LLM æœåŠ¡å®ç°)

[//]: # (â”œâ”€â”€ example/             # ç¤ºä¾‹ä»£ç )

[//]: # (â”‚   â”œâ”€â”€ client_example.go   # RPC å®¢æˆ·ç«¯ç¤ºä¾‹)

[//]: # (â”‚   â””â”€â”€ doubao_sdk_test.go  # è±†åŒ… SDK æµ‹è¯•)

[//]: # (â”œâ”€â”€ main.go              # ä¸»ç¨‹åºå…¥å£)

[//]: # (â”œâ”€â”€ go.mod               # Go æ¨¡å—å®šä¹‰)

[//]: # (â”œâ”€â”€ trpc_go.yaml         # tRPC é…ç½®)

[//]: # (â”œâ”€â”€ Makefile             # é¡¹ç›®ç®¡ç†è„šæœ¬)

[//]: # (â”œâ”€â”€ start.sh             # å¯åŠ¨è„šæœ¬)

[//]: # (â””â”€â”€ README.md            # é¡¹ç›®æ–‡æ¡£)

[//]: # (```)

[//]: # ()
[//]: # (## ğŸ”§ å¸¸ç”¨å‘½ä»¤)

[//]: # ()
[//]: # (```bash)

[//]: # (# ç”Ÿæˆ proto ä»£ç )

[//]: # (make proto)

[//]: # ()
[//]: # (# ç¼–è¯‘é¡¹ç›®)

[//]: # (make build)

[//]: # ()
[//]: # (# è¿è¡ŒæœåŠ¡)

[//]: # (make run)

[//]: # ()
[//]: # (# å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰)

[//]: # (make dev)

[//]: # ()
[//]: # (# æ¸…ç†ç”Ÿæˆæ–‡ä»¶)

[//]: # (make clean)

[//]: # ()
[//]: # (# å®‰è£…ä¾èµ–)

[//]: # (make deps)

[//]: # ()
[//]: # (# æ ¼å¼åŒ–ä»£ç )

[//]: # (make fmt)

[//]: # ()
[//]: # (# æŸ¥çœ‹å¸®åŠ©)

[//]: # (make help)

[//]: # (```)

[//]: # ()
[//]: # (## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½)

[//]: # ()
[//]: # (### 1. æµå¼å¯¹è¯ï¼ˆStreamChatï¼‰)

[//]: # ()
[//]: # (æ”¯æŒå®æ—¶æµå¼è¿”å›å¯¹è¯å†…å®¹ï¼Œé€‚åˆèŠå¤©åœºæ™¯ã€‚)

[//]: # ()
[//]: # (**ç‰¹ç‚¹ï¼š**)

[//]: # (- å®æ—¶è¿”å›ï¼Œç”¨æˆ·ä½“éªŒå¥½)

[//]: # (- æ”¯æŒé•¿æ–‡æœ¬ç”Ÿæˆ)

[//]: # (- è‡ªåŠ¨å¤„ç†æµå¼æ•°æ®)

[//]: # ()
[//]: # (### 2. æ™®é€šå¯¹è¯ï¼ˆChatï¼‰)

[//]: # ()
[//]: # (ä¸€æ¬¡æ€§è¿”å›å®Œæ•´å¯¹è¯ç»“æœã€‚)

[//]: # ()
[//]: # (**ç‰¹ç‚¹ï¼š**)

[//]: # (- ç®€å•ç›´æ¥)

[//]: # (- é€‚åˆçŸ­æ–‡æœ¬åœºæ™¯)

[//]: # (- è¿”å›å®Œæ•´çš„ token ä½¿ç”¨ç»Ÿè®¡)

[//]: # ()
[//]: # (### 3. æ¨¡å‹ç®¡ç†ï¼ˆListModelsï¼‰)

[//]: # ()
[//]: # (è·å–æ‰€æœ‰æ”¯æŒçš„æ¨¡å‹ä¿¡æ¯ã€‚)

[//]: # ()
[//]: # (**ç‰¹ç‚¹ï¼š**)

[//]: # (- æ”¯æŒæŒ‰æä¾›å•†è¿‡æ»¤)

[//]: # (- è¿”å›æ¨¡å‹è¯¦ç»†ä¿¡æ¯)

[//]: # (- æ ‡æ³¨æ¨¡å‹èƒ½åŠ›ï¼ˆæµå¼ã€è§†è§‰ç­‰ï¼‰)

[//]: # ()
[//]: # (## ğŸ”Œ æ¥å£è¯´æ˜)

[//]: # ()
[//]: # (### StreamChat - æµå¼å¯¹è¯)

[//]: # ()
[//]: # (```protobuf)

[//]: # (rpc StreamChat &#40;StreamChatRequest&#41; returns &#40;stream StreamChatResponse&#41; {})

[//]: # (```)

[//]: # ()
[//]: # (**è¯·æ±‚å‚æ•°ï¼š**)

[//]: # (```go)

[//]: # (type StreamChatRequest struct {)

[//]: # (    ModelId         string            // æ¨¡å‹IDï¼ˆå¿…å¡«ï¼‰)

[//]: # (    Messages        []*ChatMessage    // å¯¹è¯å†å²ï¼ˆå¿…å¡«ï¼‰)

[//]: # (    Temperature     float32           // æ¸©åº¦ 0-1ï¼ˆå¯é€‰ï¼‰)

[//]: # (    MaxTokens       int32             // æœ€å¤§tokenæ•°ï¼ˆå¯é€‰ï¼‰)

[//]: # (    TopP            float32           // top_pé‡‡æ ·ï¼ˆå¯é€‰ï¼‰)

[//]: # (    ReasoningEffort string            // æ¨ç†å¼ºåº¦ï¼ˆå¯é€‰ï¼‰)

[//]: # (    ExtraParams     map[string]string // é¢å¤–å‚æ•°ï¼ˆå¯é€‰ï¼‰)

[//]: # (})

[//]: # (```)

[//]: # ()
[//]: # (**å“åº”ï¼š**)

[//]: # (```go)

[//]: # (type StreamChatResponse struct {)

[//]: # (    Id      string    // å“åº”ID)

[//]: # (    Model   string    // ä½¿ç”¨çš„æ¨¡å‹)

[//]: # (    Created int64     // åˆ›å»ºæ—¶é—´æˆ³)

[//]: # (    Choices []*Choice // é€‰æ‹©åˆ—è¡¨)

[//]: # (    Usage   *Usage    // tokenä½¿ç”¨æƒ…å†µ)

[//]: # (    IsEnd   bool      // æ˜¯å¦ç»“æŸ)

[//]: # (})

[//]: # (```)

[//]: # ()
[//]: # (## ğŸŒŸ ä½¿ç”¨ç¤ºä¾‹)

[//]: # ()
[//]: # (### Go å®¢æˆ·ç«¯è°ƒç”¨)

[//]: # ()
[//]: # (```go)

[//]: # (import &#40;)

[//]: # (    pb "github.com/yzf120/elysia-llm-tool/proto/llm")

[//]: # (&#41;)

[//]: # ()
[//]: # (// åˆ›å»ºå®¢æˆ·ç«¯)

[//]: # (proxy := pb.NewLLMServiceClientProxy&#40;&#41;)

[//]: # ()
[//]: # (// æµå¼å¯¹è¯)

[//]: # (req := &pb.StreamChatRequest{)

[//]: # (    ModelId: "doubao-seed-1-6-lite-251015",)

[//]: # (    Messages: []*pb.ChatMessage{)

[//]: # (        {)

[//]: # (            Role: "user",)

[//]: # (            Content: []*pb.ContentPart{)

[//]: # (                {)

[//]: # (                    Type: "text",)

[//]: # (                    Text: "ä½ å¥½",)

[//]: # (                },)

[//]: # (            },)

[//]: # (        },)

[//]: # (    },)

[//]: # (})

[//]: # ()
[//]: # (stream, _ := proxy.StreamChat&#40;ctx, req&#41;)

[//]: # (for {)

[//]: # (    resp, err := stream.Recv&#40;&#41;)

[//]: # (    if err == io.EOF || resp.IsEnd {)

[//]: # (        break)

[//]: # (    })

[//]: # (    fmt.Print&#40;resp.Choices[0].Delta.Content&#41;)

[//]: # (})

[//]: # (```)

[//]: # ()
[//]: # (## ğŸ› å¸¸è§é—®é¢˜)

[//]: # ()
[//]: # (### 1. Proto ä»£ç ç”Ÿæˆå¤±è´¥)

[//]: # ()
[//]: # (**é—®é¢˜ï¼š** è¿è¡Œ `make proto` å¤±è´¥)

[//]: # ()
[//]: # (**è§£å†³ï¼š**)

[//]: # (```bash)

[//]: # (# ç¡®ä¿å®‰è£…äº† trpc å·¥å…·)

[//]: # (go install trpc.group/trpc-go/trpc-cmdline/trpc@latest)

[//]: # ()
[//]: # (# é‡æ–°ç”Ÿæˆ)

[//]: # (cd proto && make clean && make)

[//]: # (```)

[//]: # ()
[//]: # (### 2. æœåŠ¡å¯åŠ¨å¤±è´¥)

[//]: # ()
[//]: # (**é—®é¢˜ï¼š** æç¤ºç«¯å£è¢«å ç”¨)

[//]: # ()
[//]: # (**è§£å†³ï¼š**)

[//]: # (```bash)

[//]: # (# ä¿®æ”¹ trpc_go.yaml ä¸­çš„ç«¯å£)

[//]: # (# æˆ–è€…æ€æ‰å ç”¨ç«¯å£çš„è¿›ç¨‹)

[//]: # (lsof -ti:9001 | xargs kill -9)

[//]: # (```)

[//]: # ()
[//]: # (### 3. API Key æœªè®¾ç½®)

[//]: # ()
[//]: # (**é—®é¢˜ï¼š** æç¤º API Key æœªè®¾ç½®)

[//]: # ()
[//]: # (**è§£å†³ï¼š**)

[//]: # (```bash)

[//]: # (# ç¡®ä¿ .env æ–‡ä»¶å­˜åœ¨ä¸”é…ç½®æ­£ç¡®)

[//]: # (cat .env)

[//]: # ()
[//]: # (# æˆ–è€…ç›´æ¥è®¾ç½®ç¯å¢ƒå˜é‡)

[//]: # (export DOUBAO_API_KEY=ä½ çš„å¯†é’¥)

[//]: # (```)

[//]: # ()
[//]: # (## ğŸ“ å¼€å‘è®¡åˆ’)

[//]: # ()
[//]: # (- [x] åŸºç¡€æ¡†æ¶æ­å»º)

[//]: # (- [x] è±†åŒ…æ¨¡å‹æ¥å…¥)

[//]: # (- [x] æµå¼å¯¹è¯æ”¯æŒ)

[//]: # (- [x] å¤šæ¨¡æ€æ”¯æŒ)

[//]: # (- [ ] æ··å…ƒæ¨¡å‹æ¥å…¥)

[//]: # (- [ ] DeepSeek æ¨¡å‹æ¥å…¥)

[//]: # (- [ ] æ¨¡å‹è´Ÿè½½å‡è¡¡)

[//]: # (- [ ] è¯·æ±‚é™æµå’Œç†”æ–­)

[//]: # (- [ ] ç›‘æ§å’Œæ—¥å¿—å¢å¼º)

[//]: # (- [ ] å•å…ƒæµ‹è¯•è¦†ç›–)

[//]: # ()
[//]: # (## ğŸ“ æŠ€æœ¯æ”¯æŒ)

[//]: # ()
[//]: # (å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š)

[//]: # (1. [README.md]&#40;README.md&#41; - å®Œæ•´æ–‡æ¡£)

[//]: # (2. [example/]&#40;example/&#41; - ç¤ºä¾‹ä»£ç )

[//]: # (3. é¡¹ç›® Issues)

[//]: # ()
[//]: # (## ğŸ“„ License)

[//]: # ()
[//]: # (MIT License)
